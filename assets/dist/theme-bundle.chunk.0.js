(window.webpackJsonpWebpackChiara=window.webpackJsonpWebpackChiara||[]).push([[0],{314:function(t,n,i){"use strict";i.r(n),function(t){i.d(n,"initBrandPage",(function(){return l})),i.d(n,"initCategoryPage",(function(){return p})),i.d(n,"initBrandsPage",(function(){return d})),i.d(n,"initSearchPage",(function(){return h}));i(7);var e=i(34),o=i.n(e),a=i(15),s=i.n(a),r=i(1),c=function(){function n(t,n){this.options=s()({},{containerSelector:".productGrid",paginationSelector:".pagination",nextLinkSelector:".pagination-item--next .pagination-link",loadingClass:"is-loading",threshold:100,appendSelector:".product",template:"chiara/category/ajax-product-listing",config:{}},n),this.$scope=t,this.isRequesting=!1,this.onScroll=this.onScroll.bind(this),this.bindEvents()}var i=n.prototype;return i.bindEvents=function(){!1===this.options.loadOnScroll?t(".load_more_btn").on("click",this.onScroll):t(window).on("scroll",o()(this.onScroll,200))},i.onScroll=function(){if(!this.isRequesting){var n=t(this.options.paginationSelector,this.$scope),i=t(this.options.nextLinkSelector,n);if(0!==i.length){var e=i.offset().top-this.options.threshold,o=t(window).scrollTop(),a=o+t(window).height();e>=o&&e<=a&&this.request(i.attr("href"))}}},i.request=function(n){var i=this,e=t(this.options.containerSelector,this.$scope),o=t(this.options.paginationSelector,this.$scope);this.isRequesting=!0,o.addClass(this.options.loadingClass),e.addClass(this.options.loadingClass),r.a.getPage(n,{template:this.options.template,config:this.options.config},(function(n,a){if(i.isRequesting=!1,o.removeClass(i.options.loadingClass),e.removeClass(i.options.loadingClass),n)return n;var s=t(a),r=t(i.options.appendSelector,s);r.length>0&&e.append(r);var c=s.find(i.options.paginationSelector);o.empty().append(c.children()),0===t(".pagination-item--next",o).length&&t(".load_more_btn").hide()}))},n}();function l(n){t("[data-brand-infinite-scroll]").each((function(i,e){new c(t(e),{template:"chiara/brand/ajax-product-listing",config:{brand:{products:{limit:parseInt(n.themeSettings.products_per_page,10)}}}})}))}function p(n){t("[data-category-infinite-scroll]").each((function(i,e){new c(t(e),{loadOnScroll:!1,config:{category:{products:{limit:parseInt(n.themeSettings.products_per_page,10)}}}})}))}function d(n){t("[data-brands-infinite-scroll]").each((function(i,e){new c(t(e),{containerSelector:".brandGrid",appendSelector:".brand",template:"chiara/brand/ajax-brand-listing",config:{brands:{limit:parseInt(n.themeSettings.products_per_page,10)}}})}))}function h(n){t("[data-search-infinite-scroll]").each((function(i,e){new c(t(e),{template:"chiara/search/ajax-product-listing",config:{product_results:{limit:parseInt(n.themeSettings.products_per_page,10)}}})}))}n.default=c}.call(this,i(0))}}]);
//# sourceMappingURL=theme-bundle.chunk.0.js.map
